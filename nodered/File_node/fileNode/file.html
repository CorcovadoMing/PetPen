<script type="text/javascript">
    RED.nodes.registerType('File',{
        category: 'Layer',
        color: '#ffaaaa',
        defaults: {
            name: {value:"file"},
            type: {value:"File"},
	    file: {value: ""},
        },
        inputs:1,
        outputs:1,
        icon: "face.png",
        label: function() {
            return this.name||"Output";
        }
    });
</script>

<script type="text/x-red" data-template-name="File">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-type"><i class="icon-tag"></i> Type</label>
        <input type="text" id="node-input-type" placeholder="Type">
    </div>
    <div class="form-row">
        <label for="node-input-file"><i class="icon-tag"></i> File</label>
        <input type="text" id="node-input-file" placeholder="File">
    </div>
    <form id="ggyy" enctype="multipart/form-data" method="post">
        <input type="fileupload" name="myUploadedFile" />
        <button onclick="doUpload(this)">Submit</button>
    </form>
</script>
<script type="text/javascript">
  console.log(document);
function doUpload(button){
    var form = button.parentNode
    console.log([button,form])
    var uploader = button.previousElementSibling;
      console.log(uploader.files[0]);

    var uploadFile = function(url, file) {
      var formData = new FormData();
      formData.append("myUploadedFile", file);
      var xhr = new XMLHttpRequest();
      xhr.open("post", url, true);
      //xhr.setRequestHeader("Content-Type", "multipart/form-data");
      //xhr.setRequestHeader("X-File-Name", file.name);
      //xhr.setRequestHeader("X-File-Size", file.size);
      //xhr.setRequestHeader("X-File-Type", file.type);
	xhr.send(formData);
    }
    uploadFile("http://140.109.18.114:1882/upload", uploader.files[0]);
}
</script>â€¨
<script type="text/x-red" data-help-name="Hello World">
    <p>A node that increments every time a new message is received and sends Hello World in return.<br/>
    </p>
</script>
