{% extends 'base_generic.html' %}
{% load static %}

{% block head %}
  <script>
    function closeProject(){
      $.ajax({
        async: false,
        url: "{% url "model:manage_editor" %}",
        method: "GET",
        data:{
          action: "close"
        }
      });
      window.close();
    };
    $('document').ready(function(){
      setTimeout("$('#nodered').css('display','block');$('#nodered-frame').attr('src','http://140.109.18.114:{{port}}');", 3300);
      
      <!--$('#nodered-frame').attr('src','http://140.109.18.114:{{port}}');-->
      $('#close-project').click(function(){
      });
    });
  </script>
{% endblock %}

{% block content %}
<div id="loading" class="my-auto justify-content-center">
  <h1>Loading editor...</h1>
  <i class="fa fa-spinner fa-spin fa-5x fa-fw" aria-hidden="true"></i>
</div>
<div id="nodered" style="display:none;">
  <div style="position:fixed; top:6px; right:220px; z-index:99;">
    <button id="close-project" style="cursor:pointer; display: inline-block; border: solid #990000; background-color: #990000; color: #FFFFFF;" onclick="closeProject()">close project</button>
  </div>
  <iframe id="nodered-frame" frameborder="0" style="border:none; width:100%; height:calc(100%); position: fixed; top: 0px; z-index:0;"></iframe>
</div>
{% endblock %}
